!function(a,b,c){"use strict";function d(){var b=a.innerWidth||q.clientWidth||r.clientWidth,c=a.innerHeight||q.clientHeight||r.clientHeight;return{width:b,height:c}}function e(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function f(a,c){var d=b.getElementsByTagName("head")[0],e=b.createElement("script"),f=!1;e.onload=e.onreadystatechange=function(){return e.readyState&&"complete"!==e.readyState&&"loaded"!==e.readyState||f?!1:(e.onload=e.onreadystatechange=null,f=!0,c(),void 0)},e.src=a,d.insertBefore(e,d.firstChild)}function g(){o=TraceKit.noConflict(),!t&&o.report.subscribe(i,!0),t=!0}function h(){s||(n=a.onerror,a.onerror=function(b,c,d,h,j){var k=arguments,m=this;p.isCapturing&&(j?l("UncaughtError",b,[],e({},p._customData),j.stack):o?o.report.traceKitWindowOnError.apply(m,k):p.depsSrc?f(p.depsSrc,function(){g(),o.report.traceKitWindowOnError.apply(m,k)}):i({message:b,stack:[{line:d,url:c,func:"?",column:h}]})),a.TraceKit&&g(),n&&n.call(this,arguments)},s=!0)}function i(a){l("UncaughtError",a.message,a.stack,e({},p._customData))}function j(a){for(var b=[],c=0;c<a.length;++c)b.push({column:a[c].column,lineNumber:a[c].line,methodName:a[c].func,file:a[c].url});return b}function k(b,c,d){var e=new a.XMLHttpRequest;if("withCredentials"in e)e.open(c,b,!0);else{if(!a.XDomainRequest)return console.log("CORS not supported."),void 0;e=new XDomainRequest,e.open(c,b)}e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(d))}function l(e,f,g,h,i){if(p.isCapturing){var l,m=d(),n=p._apiKey;l={time:new Date,client:{name:"errwischt.js",version:"0.3.1"},error:{type:e,message:f},environment:{userLanguage:c.userLanguage,documentMode:b.documentMode,browserWidth:m.width,browserHeight:m.height,screenWidth:a.screen.width||0,screenHeight:a.screen.height||0,browser:c.appCodeName,browserName:c.appName,browserVersion:c.appVersion,userAgent:c.userAgent,cookieEnabled:c.cookieEnabled,platform:c.platform},request:{url:b.location.href.replace(b.location.search,""),queryString:b.location.search},data:h,stackTrace:j(g),rawStackTrace:i||""},k("development"===p.ENV?"http://errwischt.local:8181/add":"http://api.errwischt.com/add","POST",{token:n,data:l})}}function m(a,b,c,d,f){d=e(e({},p._customData),d||{}),l(a,b,c||[],d,f)}var n,o,p,q=b.documentElement,r=b.getElementsByTagName("body")[0],s=!1,t=!1;p={isCapturing:!1,_customData:{},setup:function(a){a&&(this._apiKey=a),h(),this.start()},start:function(){this._apiKey&&(this.isCapturing=!0)},stop:function(){this.isCapturing=!1},customData:function(a){e(this._customData,a)},send:function(a,b,c){if("object"==typeof a){var d=a;if(c=b,o){var e=o.computeStackTrace(d);m(e.name,e.message,e.stack||[],c,d.stack)}else p.depsSrc?f(p.depsSrc,function(){g();var a=o.computeStackTrace(d);m(a.name,a.message,a.stack||[],c,d.stack)}):m(d.name,d.message,[],c,d.stack)}else"string"!=typeof b&&(c=b,b=a,a="SimpleError"),m(a,b,[],c)}},a.Errwischt=p}(window,document,navigator);